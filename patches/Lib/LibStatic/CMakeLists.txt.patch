--- CMakeLists.txt
+++ CMakeLists.txt
@@ -9,21 +9,22 @@ include_directories( ${RAKNET_INTERNAL_INCLUDE_DIRS} )
 add_library(RakNetLibStatic STATIC ${ALL_CPP_SRCS} ${ALL_HEADER_SRCS} readme.txt)
 
 IF(WIN32 AND NOT UNIX)
-	SET( CMAKE_CXX_FLAGS "/D WIN32 /D _RAKNET_LIB /D _CRT_NONSTDC_NO_DEPRECATE /D _CRT_SECURE_NO_DEPRECATE /GS- /GR- ")
+	add_definitions(-DWIN32 -D_RAKNET_LIB -D_CRT_NONSTDC_NO_DEPRECATE -D_CRT_SECURE_NO_DEPRECATE)
+	IF(MSVC)
+		SET( CMAKE_CXX_FLAGS "/GS- /GR- ")
+	ENDIF()
 ENDIF(WIN32 AND NOT UNIX)
 
 IF(WIN32 AND NOT UNIX)
 	target_link_libraries (RakNetLibStatic ${RAKNET_LIBRARY_LIBS})
 
-	IF(NOT ${CMAKE_GENERATOR} STREQUAL "MSYS Makefiles")
 
-		IF( MSVC10 OR MSVC11 OR MSVC12 )
+		IF( MSVC10 OR MSVC11 OR MSVC12 OR MSVC14 OR MSVC15)
 			set_target_properties(RakNetLibStatic PROPERTIES STATIC_LIBRARY_FLAGS "/NODEFAULTLIB:\"LIBCD.lib LIBCMTD.lib MSVCRT.lib\"" )
-		ELSE()
+		ELSEIF(MSVC)
 			set_target_properties(RakNetLibStatic PROPERTIES STATIC_LIBRARY_FLAGS "/NODEFAULTLIB:&quot;LIBCD.lib LIBCMTD.lib MSVCRT.lib&quot;" )
 		ENDIF()
-				
-	ENDIF(NOT ${CMAKE_GENERATOR} STREQUAL "MSYS Makefiles")
+
 
 ELSE(WIN32 AND NOT UNIX)
 	target_link_libraries (RakNetLibStatic ${RAKNET_LIBRARY_LIBS})
